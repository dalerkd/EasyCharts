
## 2021年1月3日
坐标系 通知机制 初步完成调试

坐标系可接收 处理超范围通知 √
坐标系本身绘制不会触发 通知 √
坐标系能触发重绘 √



主要有以下几种修正:
- 错误使用函数名 应使用调用 死循环 √
- 未按约定设置通知机制 死循环 √
- 若干cb无效的问题 √ bind
- 使用错误的像素坐标作为通知数据 √


所以我们可以尝试开启 坐标系了.
## 2020年12月1日
使用了新的时机来解决这个问题:
通过 添加到EC的一瞬间,向 ->图层->图元 传递基础管理对象

现在它死循环了.

## 2020年11月30日
简单描述一下现在的挑战:
- 坐标系图层 如何通知 EC进行重绘? √
通过在回调的时候注入对象解决.

总是注入相同的对象.是否可以 将draw对象作为基础提供?如何提供呢?

EC -> 图层 -> 坐标系图元

// TODO: 未注册 如何注册? 目前没有好的暴露方案

一个常用的方案是将接口注入给图层,或者将接口暴露给底层绘制

## 2020年11月27日
让我们梳理一下绘制机制:

坐标图层注册回调
绘制某个内容 => 触发 => 极限值 => 坐标模块

坐标模块 =>  => 设置坐标模块的新属性 => 通知(重绘制+清空)rePaint

## 2020年11月26日
再简单理解一下 极限值回调机制

坐标系 元组 注册 极限值通知. 并且屏蔽自己的绘制通知.
其他元组绘制的 时候就会通知 坐标系,坐标系 根据自己的情况,决定:
是否重绘整个页面.(因为Canvas必须要清屏 才能 清除之前的坐标系像素.)
如果 需要重绘 就触发重绘即可.

### 重绘
清理屏幕
执行渲染函数. 但是这里有一个问题: 就是
上一次的绘制可能没有结束. 直接去调用下一次绘制?

绘制 => 触发回调 => 再次绘制 ... ...
第一次的绘制是不是没有搞完?

## 2020年11月16日
极限值的触发机制

坐标系 需要获取极限值 来动态调节范围.

具体的canvas绘制动作 例如 Line：
要提供两个极限坐标,即:
右上角和左下角 

给管理函数.

## 2020年11月15日
继续来看之前的效果:

我的理解是:
- 背景属于一个图层//默认图层
- 坐标系也属于一个图层//默认图层
- 其他的属于各自的图层

之前的问题是:
- 坐标系 图层 如何自动化获取其他平行图层的极值?  优先级**弱** TODO
- 所有的绘制工作应该做像素级别 的比例转换        优先级**高** √
我认为这个工作应该放在内部 Echart 中
Echart 或者 其基类 提供基础的功能接口.
而这些数据转换就在其中控制.


特别是第2个疑问:
如何 能动态的控制 DIY元素的绘制坐标的问题:

控新 => 能传入接口 => 其能动态更新接口

其实方案也清楚,就是 定义Canvas的标准伪接口,eg:
1. 定义接口
```TS
Interface IF{
    void 点()
    void 线()
    void 弧()
}
```
2. 传入接口 或 对象
3. 为了更新: 传入类cb函数

目的是,例如: 
通过 点()=>进入EasyCharts=>能动态计算改变的坐标系=>转为canvas命令
有挑战的点是 "动态计算"

OK.已经完成了:通过在递归调用渲染的时候注入 DrawObject 进去,达到了:
1. 实时数据:可以随时影响DrawObject后再去 绘制   √
2. 集中管理:比例算法,canvas对象等之前分散的问题,在DrawObject中集中管理 √


## 2020年8月16日
我们初步实现一个效果.

目前的问题是:

1. 画线的控制有点...不自然.
线条通过什么接口去画?
直接去操纵屏幕吗?
现在是直接去访问 canvas的节点,那么它的canvas对象从哪里来呢?
应该由EasyCharts综合管理.
所以 需要考虑 元素和canvas的关系.
2. 画线的坐标转换
需要一些按比例缩放,
那么坐标转换就要能访问所有的元数据边界信息.
元数据起码要告知我们 它的范围极值是多少.



---------------

左上屏幕坐标,和左下坐标的转换.

## 挑战

- 坐标

那是最终渲染坐标的问题.
我们完全可以在最终渲染的时候决定坐标轴的方向等等...
这个并不影响我们的数据的存储.

- 数据格式的存储

* 坐标系
* 图层
* 图元
* 元素/注释/描述

- 颜色
- 坐标

我们来看一下描述:
特定图元里面拥有多种元素.
图元是一个非常核心的概念

## 其他系统

布局系统

不同图元对数据的处理体现在 数据的解读上.
